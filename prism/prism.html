<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prism</title>
    <link rel="stylesheet" href="css/style.css?v=2">
</head>
<body>
    <div id="control">
        <h3>Change the shape:</h3>
        <button id="btnCircle">Circle</button>
        <button id="btnSquare">Square</button>
    </div>
    <div id="description" class="">
        <p>Click the box to close. The content will be updated according to the user input.</p>
    </div>
    <div id="colorGrid">

    </div>
    <p id="colorCode" class="hide"></p>
    <script>

        const colorList = [

        ];

        const dataEg = [
            {
                story: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. ",
                name: "Aaron Yang",
                email: "aaron@aaronyang.me",
                userCity: "Fargo",
                userState: "ND",
                userCountry: "USA"
            }
        ];

        const colorGrid = document.querySelector("#colorGrid");
        const descriptionBox = document.querySelector("#description");
        const btnCircle = document.querySelector("#btnCircle");
        const btnSquare = document.querySelector("#btnSquare");

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const currentColor = '#' + urlParams.get("color");

        addDescription(dataEg[0], currentColor);


        for( let i = 0; i < 1000; i++) {
            colorList.push(`rgb(${Math.random() * (255 - 0) + 0}, ${Math.random() * (255 - 0) + 0}, ${Math.random() * (255 - 0) + 0})`)
        }
        
        colorList.forEach( color => {
            const box = document.createElement('div');
            box.className = "color-box";
            box.style = `background-color: ${color}`;
            box.addEventListener("click", e => {
                addDescription(dataEg[0], color);
            })
            colorGrid.append(box);
        });

        const myBox = document.createElement('div');
        myBox.className = "color-box user-color-box";
        myBox.style = `background-color: ${currentColor}`;
        myBox.addEventListener("click", e => {
                addDescription(dataEg[0], color);
            })
        colorGrid.append(myBox);

        document.querySelector("#colorCode").innerHTML = urlParams.get("color");


        descriptionBox.addEventListener("click", e => {
            e.currentTarget.classList.add("hide");
        })

        btnSquare.addEventListener("click", e => {
            document.querySelectorAll(".color-box").forEach( box => {
                box.classList.remove("shap-circle");
                box.classList.add("shape-sqaure");
            })
        });

        btnCircle.addEventListener("click", e => {
            document.querySelectorAll(".color-box").forEach( box => {
                box.classList.add("shap-circle");
                box.classList.remove("shape-sqaure");
            })
        })

        function addDescription (info, color) {
            descriptionBox.classList.remove("hide");
            descriptionBox.style = `background-color: ${color}`;
            descriptionBox.innerHTML = "<p>Click the box to close. The content will be updated according to the user input.</p>";
            const nameEle = document.createElement("h4");
            nameEle.innerHTML = info.name;
            const locationEle = document.createElement("p");
            locationEle.innerHTML = info.userCity + ', ' + info.userState + ', ' + info.userCountry;
            const storyEle = document.createElement("p");
            storyEle.innerHTML = info.story;

            descriptionBox.append(nameEle, locationEle, storyEle);
        }

        
    </script>
</body>
</html>